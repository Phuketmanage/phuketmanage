<h1 class="display-3"><%= t('search.title') %></h1>

<%= render 'search/form', search: @search %>


<% @houses.each_with_index do |h, i| %>
  <%#= (i+1) % 3 == 0 %>
  <% if i % 3 == 0  %>
    <div class="row mt-2">
  <% end %>
    <div class="col-md-4 mb-2">
      <div class="card ">
        <%= image_tag h.preview, class: 'card-img-top', alt: h.send("title_#{I18n.locale}") if h.preview %>
        <div class="card-body">
          <h5 class="card-title"><%= h.send("title_#{I18n.locale}") %></h5>
          <p>
            <%= "#{number_to_currency(h.prices.minimum(:amount), precision: 0, unit: '')} - #{number_to_currency(h.prices.maximum(:amount), precision: 0, unit: '')} THB/#{t('search.per_day')}" %>
          </p>
          <p>
            <%= "#{t('houses.capacity', count: h.capacity)}, " if h.capacity %> <%= "#{t('houses.rooms', count: h.rooms)}, " if h.rooms %> <%= t('houses.bathrooms', count: h.bathrooms) if h.bathrooms %></p>
          <p><%= t('houses.location') %>: <%= h.locations.map{|l| l.send("name_#{I18n.locale}")}.join(', ') %></p>
          <p class="card-text">
            <% text = simple_format h.send("description_#{I18n.locale}") %>
            <%= truncate(text,
                                length: 140,
                                separator: ' ', escape: false) %>
          </p>

          <%= link_to t('houses.view'), house_path(h.number), class: "btn btn-primary", target: "_blank" %>
        </div>
      </div>
    </div>
  <% if (i+1) % 3 == 0 || h == @houses.last %>
    </div>
  <% end %>
<% end %>
